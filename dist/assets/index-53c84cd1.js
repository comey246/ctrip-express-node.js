import{L as h,r as t,V as b,j as a,aA as _,T as E,M as S,U as T}from"./index-f1a77953.js";import{e as w,d as L}from"./mall-3334e9f8.js";import{T as v}from"./Table-ac82eb16.js";import"./extendsObject-4481fb23.js";const I=t.lazy(()=>b(()=>import("./index-73447d63.js"),["assets/index-73447d63.js","assets/index-f1a77953.js","assets/index-190da3ae.css","assets/mall-3334e9f8.js","assets/index-2f76128d.js","assets/index-e7d1e950.js","assets/index-c06c6b78.css"])),R=M=>{const[o,l]=t.useState(!1),[p,d]=t.useState(!1),[r,i]=t.useState([]),m=e=>{r[0]===e.key?i([]):i([e.key])},u=[{title:"商品名称",dataIndex:"name",key:"商品名称"},{title:"订单编号",dataIndex:"number",key:"订单编号"},{title:"订单操作",dataIndex:"",key:"x",render:(e,n)=>S("div",{children:[a("a",{onClick:()=>m(n),children:"详情"})," | ",a("a",{onClick:()=>k(n.key),children:"删除"})]})}],[y,x]=t.useState([{key:1,name:"无记录",number:"空空如也",description:"别找了"}]),f=async()=>{d(!0);try{const{code:e,data:n}=await w(),c=[];console.log(n),n.forEach(s=>{const g={key:s,name:"机票",number:s,description:a(t.Suspense,{fallback:a("div",{children:"Loading..."}),children:a(I,{order:s})})};c.push(g)}),x(c)}finally{d(!1)}};t.useEffect(()=>{f()},[o]);const k=async e=>{(await L({order_id:e})).code===200&&(l(!o),T.success("删除成功"))};return a(t.Fragment,{children:a(_,{spinning:p,tip:"Loading...",children:a(v,{columns:u,expandable:{expandedRowRender:e=>a("div",{style:{margin:0},children:e.description}),rowExpandable:e=>e.name!=="Not Expandable",expandedRowKeys:r},dataSource:y})})})},D={setToken:E},A=h(null,D)(R);export{A as default};
