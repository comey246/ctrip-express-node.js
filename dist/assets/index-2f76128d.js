import{r as i,e as de,be as ue,Y as pe,$ as H,a as me,d as U,bD as Z,bv as ge,h as fe,m as he,at as be,l as ye,q as ve,ae as Ce,z as Se,s as $e,A as ke,bE as xe,M as $,j as l,aA as Ee,bt as q,ay as Pe,av as Y,aq as Ne,as as ne}from"./index-f1a77953.js";import{f as oe,p as we}from"./mall-3334e9f8.js";import{D as h}from"./index-e7d1e950.js";var Oe={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},Ie=function(){var t=i.useRef([]),r=i.useRef(null);return i.useEffect(function(){var n=Date.now(),s=!1;t.current.forEach(function(a){if(a){s=!0;var o=a.style;o.transitionDuration=".3s, .3s, .3s, .06s",r.current&&n-r.current<100&&(o.transitionDuration="0s, 0s")}}),s&&(r.current=Date.now())}),t.current},te=0,De=ue();function _e(){var e;return De?(e=te,te+=1):e="TEST_OR_SSR",e}const je=function(e){var t=i.useState(),r=de(t,2),n=r[0],s=r[1];return i.useEffect(function(){s("rc_progress_".concat(_e()))},[]),e||n};var We=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function re(e){return+e.replace("%","")}function se(e){var t=e??[];return Array.isArray(t)?t:[t]}var X=100,Q=function(t,r,n,s,a,o,d,c,p,m){var f=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,b=n/100*360*((360-o)/360),v=o===0?0:{bottom:0,top:180,left:90,right:-90}[d],u=(100-s)/100*r;return p==="round"&&s!==100&&(u+=m/2,u>=r&&(u=r-.01)),{stroke:typeof c=="string"?c:void 0,strokeDasharray:"".concat(r,"px ").concat(t),strokeDashoffset:u+f,transform:"rotate(".concat(a+b+v,"deg)"),transformOrigin:"0 0",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},z=function(t){var r=t.id,n=t.prefixCls,s=t.steps,a=t.strokeWidth,o=t.trailWidth,d=t.gapDegree,c=d===void 0?0:d,p=t.gapPosition,m=t.trailColor,f=t.strokeLinecap,b=t.style,v=t.className,u=t.strokeColor,C=t.percent,y=pe(t,We),g=je(r),S="".concat(g,"-gradient"),E=X/2-a/2,k=Math.PI*2*E,P=c>0?90+c/2:-90,_=k*((360-c)/360),L=H(s)==="object"?s:{count:s,space:2},j=L.count,O=L.space,x=Q(k,_,0,100,P,c,p,m,f,a),N=se(C),I=se(u),R=I.find(function(w){return w&&H(w)==="object"}),J=Ie(),ce=function(){var D=0;return N.map(function(T,A){var B=I[A]||I[I.length-1],M=B&&H(B)==="object"?"url(#".concat(S,")"):void 0,F=Q(k,_,D,T,P,c,p,B,f,a);return D+=T,i.createElement("circle",{key:A,className:"".concat(n,"-circle-path"),r:E,cx:0,cy:0,stroke:M,strokeLinecap:f,strokeWidth:a,opacity:T===0?0:1,style:F,ref:function(G){J[A]=G}})}).reverse()},le=function(){var D=Math.round(j*(N[0]/100)),T=100/j,A=0;return new Array(j).fill(null).map(function(B,M){var F=M<=D-1?I[0]:m,ee=F&&H(F)==="object"?"url(#".concat(S,")"):void 0,G=Q(k,_,A,T,P,c,p,F,"butt",a,O);return A+=(_-G.strokeDashoffset+O)*100/_,i.createElement("circle",{key:M,className:"".concat(n,"-circle-path"),r:E,cx:0,cy:0,stroke:ee,strokeWidth:a,opacity:1,style:G,ref:function(ae){J[M]=ae}})})};return i.createElement("svg",me({className:U("".concat(n,"-circle"),v),viewBox:"".concat(-X/2," ").concat(-X/2," ").concat(X," ").concat(X),style:b,id:r,role:"presentation"},y),R&&i.createElement("defs",null,i.createElement("linearGradient",{id:S,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(R).sort(function(w,D){return re(w)-re(D)}).map(function(w,D){return i.createElement("stop",{key:D,offset:w,stopColor:R[w]})}))),!j&&i.createElement("circle",{className:"".concat(n,"-circle-trail"),r:E,cx:0,cy:0,stroke:m,strokeLinecap:f,strokeWidth:o||a,style:x}),j?le():ce())};z.defaultProps=Oe;z.displayName="Circle";function W(e){return!e||e<0?0:e>100?100:e}function K(e){let{success:t,successPercent:r}=e,n=r;return t&&"progress"in t&&(n=t.progress),t&&"percent"in t&&(n=t.percent),n}const Le=e=>{let{percent:t,success:r,successPercent:n}=e;const s=W(K({success:r,successPercent:n}));return[s,W(W(t)-s)]},Ae=e=>{let{success:t={},strokeColor:r}=e;const{strokeColor:n}=t;return[n||Z.green,r||null]},V=(e,t,r)=>{var n,s,a,o;let d=-1,c=-1;if(t==="step"){const p=r.steps,m=r.strokeWidth;typeof e=="string"||typeof e>"u"?(d=e==="small"?2:14,c=m??8):typeof e=="number"?[d,c]=[e,e]:[d=14,c=8]=e,d*=p}else if(t==="line"){const p=r==null?void 0:r.strokeWidth;typeof e=="string"||typeof e>"u"?c=p||(e==="small"?6:8):typeof e=="number"?[d,c]=[e,e]:[d=-1,c=8]=e}else(t==="circle"||t==="dashboard")&&(typeof e=="string"||typeof e>"u"?[d,c]=e==="small"?[60,60]:[120,120]:typeof e=="number"?[d,c]=[e,e]:(d=(s=(n=e[0])!==null&&n!==void 0?n:e[1])!==null&&s!==void 0?s:120,c=(o=(a=e[0])!==null&&a!==void 0?a:e[1])!==null&&o!==void 0?o:120));return[d,c]},Re=3,Te=e=>Re/e*100,Me=e=>{const{prefixCls:t,trailColor:r=null,strokeLinecap:n="round",gapPosition:s,gapDegree:a,width:o=120,type:d,children:c,success:p,size:m}=e,f=m??[o,o],[b,v]=V(f,"circle");let{strokeWidth:u}=e;u===void 0&&(u=Math.max(Te(b),6));const C={width:b,height:v,fontSize:b*.15+6},y=i.useMemo(()=>{if(a||a===0)return a;if(d==="dashboard")return 75},[a,d]),g=s||d==="dashboard"&&"bottom"||void 0,S=Object.prototype.toString.call(e.strokeColor)==="[object Object]",E=Ae({success:p,strokeColor:e.strokeColor}),k=U(`${t}-inner`,{[`${t}-circle-gradient`]:S}),P=i.createElement(z,{percent:Le(e),strokeWidth:u,trailWidth:u,strokeColor:E,strokeLinecap:n,trailColor:r,prefixCls:t,gapDegree:y,gapPosition:g});return i.createElement("div",{className:k,style:C},b<=20?i.createElement(ge,{title:c},i.createElement("span",null,P)):i.createElement(i.Fragment,null,P,c))},Fe=Me;var Xe=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Be=e=>{let t=[];return Object.keys(e).forEach(r=>{const n=parseFloat(r.replace(/%/g,""));isNaN(n)||t.push({key:n,value:e[r]})}),t=t.sort((r,n)=>r.key-n.key),t.map(r=>{let{key:n,value:s}=r;return`${s} ${n}%`}).join(", ")},Ge=(e,t)=>{const{from:r=Z.blue,to:n=Z.blue,direction:s=t==="rtl"?"to left":"to right"}=e,a=Xe(e,["from","to","direction"]);if(Object.keys(a).length!==0){const o=Be(a);return{backgroundImage:`linear-gradient(${s}, ${o})`}}return{backgroundImage:`linear-gradient(${s}, ${r}, ${n})`}},He=e=>{const{prefixCls:t,direction:r,percent:n,size:s,strokeWidth:a,strokeColor:o,strokeLinecap:d="round",children:c,trailColor:p=null,success:m}=e,f=o&&typeof o!="string"?Ge(o,r):{backgroundColor:o},b=d==="square"||d==="butt"?0:void 0,v={backgroundColor:p||void 0,borderRadius:b},u=s??[-1,a||(s==="small"?6:8)],[C,y]=V(u,"line",{strokeWidth:a}),g=Object.assign({width:`${W(n)}%`,height:y,borderRadius:b},f),S=K(e),E={width:`${W(S)}%`,height:y,borderRadius:b,backgroundColor:m==null?void 0:m.strokeColor},k={width:C<0?"100%":C,height:y};return i.createElement(i.Fragment,null,i.createElement("div",{className:`${t}-outer`,style:k},i.createElement("div",{className:`${t}-inner`,style:v},i.createElement("div",{className:`${t}-bg`,style:g}),S!==void 0?i.createElement("div",{className:`${t}-success-bg`,style:E}):null)),c)},qe=He,Ke=e=>{const{size:t,steps:r,percent:n=0,strokeWidth:s=8,strokeColor:a,trailColor:o=null,prefixCls:d,children:c}=e,p=Math.round(r*(n/100)),f=t??[t==="small"?2:14,s],[b,v]=V(f,"step",{steps:r,strokeWidth:s}),u=b/r,C=new Array(r);for(let y=0;y<r;y++){const g=Array.isArray(a)?a[y]:a;C[y]=i.createElement("div",{key:y,className:U(`${d}-steps-item`,{[`${d}-steps-item-active`]:y<=p-1}),style:{backgroundColor:y<=p-1?g:o,width:u,height:v}})}return i.createElement("div",{className:`${d}-steps-outer`},C,c)},Ue=Ke,Ve=new be("antProgressActive",{"0%":{transform:"translateX(-100%) scaleX(0)",opacity:.1},"20%":{transform:"translateX(-100%) scaleX(0)",opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}}),Ye=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:Object.assign(Object.assign({},ye(e)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize,marginInlineEnd:e.marginXS,marginBottom:e.marginXS},[`${t}-outer`]:{display:"inline-block",width:"100%"},[`&${t}-show-info`]:{[`${t}-outer`]:{marginInlineEnd:`calc(-2em - ${e.marginXS}px)`,paddingInlineEnd:`calc(2em + ${e.paddingXS}px)`}},[`${t}-inner`]:{position:"relative",display:"inline-block",width:"100%",overflow:"hidden",verticalAlign:"middle",backgroundColor:e.progressRemainingColor,borderRadius:e.progressLineRadius},[`${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorInfo}},[`${t}-success-bg, ${t}-bg`]:{position:"relative",backgroundColor:e.colorInfo,borderRadius:e.progressLineRadius,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`},[`${t}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess},[`${t}-text`]:{display:"inline-block",width:"2em",marginInlineStart:e.marginXS,color:e.progressInfoTextColor,lineHeight:1,whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[r]:{fontSize:e.fontSize}},[`&${t}-status-active`]:{[`${t}-bg::before`]:{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.progressLineRadius,opacity:0,animationName:Ve,animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${t}-status-exception`]:{[`${t}-bg`]:{backgroundColor:e.colorError},[`${t}-text`]:{color:e.colorError}},[`&${t}-status-exception ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorError}},[`&${t}-status-success`]:{[`${t}-bg`]:{backgroundColor:e.colorSuccess},[`${t}-text`]:{color:e.colorSuccess}},[`&${t}-status-success ${t}-inner:not(${t}-circle-gradient)`]:{[`${t}-circle-path`]:{stroke:e.colorSuccess}}})}},Qe=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-circle-trail`]:{stroke:e.progressRemainingColor},[`&${t}-circle ${t}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${t}-circle ${t}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.colorText,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[r]:{fontSize:`${e.fontSize/e.fontSizeSM}em`}},[`${t}-circle&-status-exception`]:{[`${t}-text`]:{color:e.colorError}},[`${t}-circle&-status-success`]:{[`${t}-text`]:{color:e.colorSuccess}}},[`${t}-inline-circle`]:{lineHeight:1,[`${t}-inner`]:{verticalAlign:"bottom"}}}},Ze=e=>{const{componentCls:t}=e;return{[t]:{[`${t}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.progressRemainingColor,transition:`all ${e.motionDurationSlow}`,"&-active":{backgroundColor:e.colorInfo}}}}}},ze=e=>{const{componentCls:t,iconCls:r}=e;return{[t]:{[`${t}-small&-line, ${t}-small&-line ${t}-text ${r}`]:{fontSize:e.fontSizeSM}}}},Je=fe("Progress",e=>{const t=e.marginXXS/2,r=he(e,{progressLineRadius:100,progressInfoTextColor:e.colorText,progressDefaultColor:e.colorInfo,progressRemainingColor:e.colorFillSecondary,progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[Ye(r),Qe(r),Ze(r),ze(r)]});var et=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const tt=["normal","exception","active","success"],rt=e=>{const{prefixCls:t,className:r,rootClassName:n,steps:s,strokeColor:a,percent:o=0,size:d="default",showInfo:c=!0,type:p="line",status:m,format:f}=e,b=et(e,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format"]),v=i.useMemo(()=>{var O,x;const N=K(e);return parseInt(N!==void 0?(O=N??0)===null||O===void 0?void 0:O.toString():(x=o??0)===null||x===void 0?void 0:x.toString(),10)},[o,e.success,e.successPercent]),u=i.useMemo(()=>!tt.includes(m)&&v>=100?"success":m||"normal",[m,v]),{getPrefixCls:C,direction:y}=i.useContext(ve),g=C("progress",t),[S,E]=Je(g),k=i.useMemo(()=>{if(!c)return null;const O=K(e);let x;const N=f||(R=>`${R}%`),I=p==="line";return f||u!=="exception"&&u!=="success"?x=N(W(o),W(O)):u==="exception"?x=I?i.createElement(Se,null):i.createElement($e,null):u==="success"&&(x=I?i.createElement(ke,null):i.createElement(xe,null)),i.createElement("span",{className:`${g}-text`,title:typeof x=="string"?x:void 0},x)},[c,o,v,u,p,g,f]),P=Array.isArray(a)?a[0]:a,_=typeof a=="string"||Array.isArray(a)?a:void 0;let L;p==="line"?L=s?i.createElement(Ue,Object.assign({},e,{strokeColor:_,prefixCls:g,steps:s}),k):i.createElement(qe,Object.assign({},e,{strokeColor:P,prefixCls:g,direction:y}),k):(p==="circle"||p==="dashboard")&&(L=i.createElement(Fe,Object.assign({},e,{strokeColor:P,prefixCls:g,progressStatus:u}),k));const j=U(g,{[`${g}-inline-circle`]:p==="circle"&&V(d,"circle")[0]<=20,[`${g}-${p==="dashboard"&&"circle"||s&&"steps"||p}`]:!0,[`${g}-status-${u}`]:!0,[`${g}-show-info`]:c,[`${g}-${d}`]:typeof d=="string",[`${g}-rtl`]:y==="rtl"},r,n,E);return S(i.createElement("div",Object.assign({className:j,role:"progressbar"},Ce(b,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),L))},ie=rt;const ct=e=>{var C,y;const{order:t,payResult:r,handleCancel:n}=e,[s,a]=i.useState(1),[o,d]=i.useState({}),[c,p]=i.useState({}),[m,f]=i.useState(!1);i.useEffect(()=>{v()},[]);const b=async()=>{const{code:g,data:{order_id:S}}=await we({order_id:t});r(g===200?3:-1,S)},v=async()=>{f(!0);try{const{code:g,data:S}=await oe({user_id:t});g===200&&(d(S),p(S.info.flight))}finally{f(!1)}},u=g=>{a(g.target.value)};return $("div",{className:"payment-page",children:[l("h1",{children:"支付页面"}),l("div",{className:"order-info",children:l(Ee,{spinning:m,tip:"Loading...",children:$(h,{title:"订单信息",children:[l(h.Item,{label:"航班号",children:c==null?void 0:c.flight_number}),l(h.Item,{label:"起飞时间",children:c==null?void 0:c.arrival_time}),l(h.Item,{label:"到达时间",children:c==null?void 0:c.departure_time}),l(h.Item,{label:"购买数量",children:o==null?void 0:o.number}),l(h.Item,{label:"预定人姓名",children:o==null?void 0:o.user_name}),l(h.Item,{label:"预定人手机号",children:(C=o==null?void 0:o.info)==null?void 0:C.phone}),l(h.Item,{label:"预定人身份证号",children:(y=o==null?void 0:o.info)==null?void 0:y.phone}),l(h.Item,{label:"下单时间",children:o==null?void 0:o.order_time}),$(h.Item,{className:"total-price",label:"支付金额",children:["¥",o==null?void 0:o.total]})]})})}),$("div",{className:"payment-methods",children:[l("h2",{children:"支付方式"}),l(q.Group,{onChange:u,value:s,children:$(Pe,{children:[l(Y,{xs:24,sm:12,md:8,lg:8,xl:8,children:l(q,{value:1,children:"微信"})}),l(Y,{xs:24,sm:12,md:8,lg:8,xl:8,children:l(q,{value:2,children:"支付宝"})}),l(Y,{xs:24,sm:12,md:8,lg:8,xl:8,children:l(q,{value:3,children:"信用卡"})})]})})]}),$("div",{className:"payment-actions",children:[l("button",{className:"cancel-payment",onClick:n,children:"取消支付"}),l("button",{onClick:b,children:"确认支付"})]})]})};const lt=e=>{var m,f,b;const{handleCancel:t,order:r}=e,n=Ne(),[s,a]=i.useState({}),[o,d]=i.useState({}),c=async()=>{var C;const{code:v,data:u}=await oe({user_id:r});v===200&&(console.log(u),a(u),d((C=u==null?void 0:u.info)==null?void 0:C.flight))};return i.useEffect(()=>{c()},[]),$("div",{className:"payment-success",children:[$("div",{className:"success-icon",children:[l(ne,{wrap:!0,children:l(ie,{type:"circle",percent:100,size:"default"})}),l("h2",{children:"提交成功"})]}),$("div",{className:"success-buttons",children:[l("button",{className:"btn",onClick:t,children:"返回"}),l("button",{className:"btn",onClick:()=>{n("/home/user/order"),t()},children:"查看"}),l("button",{className:"btn",children:"打印"})]}),l("div",{className:"order-info",children:$(h,{title:"订单信息",children:[l(h.Item,{label:"航班号",children:o==null?void 0:o.flight_number}),l(h.Item,{label:"起飞时间",children:o==null?void 0:o.arrival_time}),l(h.Item,{label:"到达时间",children:o==null?void 0:o.departure_time}),l(h.Item,{label:"购买数量",children:s==null?void 0:s.number}),l(h.Item,{label:"预定人姓名",children:(m=s==null?void 0:s.info)==null?void 0:m.name}),l(h.Item,{label:"预定人手机号",children:(f=s==null?void 0:s.info)==null?void 0:f.phone}),l(h.Item,{label:"预定人身份证号",children:(b=s==null?void 0:s.info)==null?void 0:b.idNumber}),$(h.Item,{className:"total-price",label:"支付金额",children:["¥",s==null?void 0:s.total]})]})})]})};const at=()=>{const{handleCancel:e}=props;return $("div",{className:"payment-failure",children:[$("div",{className:"failure-icon",children:[l(ne,{wrap:!0,children:l(ie,{type:"circle",percent:70,status:"exception",size:"default"})}),l("h2",{children:"提交失败"})]}),l("div",{className:"failure-button",children:l("button",{className:"btn",onClick:()=>{e()},children:"返回修改"})}),l("div",{className:"order-info",children:$(h,{title:"您提交的内容有如下错误:",children:[l(h.Item,{label:"1",children:"您的账户已被冻结"}),l(h.Item,{label:"2",children:"您的账户还不具备申请资格"})]})})]})};export{ct as P,lt as a,at as b};
